(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};App.NewDreamLog=function(t){function r(){return this.addNewLog=e(this.addNewLog,this),this.updateLog=e(this.updateLog,this),this.clearEffect=e(this.clearEffect,this),this.bounceEffect=e(this.bounceEffect,this),this.ballEffect=e(this.ballEffect,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.tagName="div",r.prototype.id="newDreamLog",r.prototype.events={"click #submit":"submit","click .newDreamLog_closeButton":"close"},r.prototype.initialize=function(){return this.template=$("#newDream-template").generateTemplate(),this.render()},r.prototype.render=function(){return $(this.el).html(this.template()),$("#newDreamLog-wrap").html(this.el)},r.prototype.submit=function(){return this.ballEffect(),this.model?this.updateLog():this.addNewLog()},r.prototype.open=function(){return $("#newDreamLog-wrap").removeClass("dreamLog_closed")},r.prototype.load=function(e){return this.model=e,this.activateEditMode(),$("#title").val(e.get("title")),$("#body").val(e.get("body"))},r.prototype.close=function(){return this.bounceEffect(),this.clearActive(),$("#newDreamLog-wrap").addClass("dreamLog_closed"),this.clearForm()},r.prototype.flash=function(){var e;return e=this,$(this.el).flashDiv(),this.clearForm()},r.prototype.isOpen=function(){return!$("#newDreamLog-wrap").hasClass("dreamLog_closed")},r.prototype.activateEditMode=function(){return this.bounceEffect(),$("#title, #body").css("background","rgba(232, 44, 12, 0.1)"),$("#submit").css("background","rgba(255,72,13,0.1)")},r.prototype.activateAddMode=function(){return this.bounceEffect(),$("#title, #body").css("background","rgba(57, 120, 172, 0.3)"),$("#submit").css("background","rgba(57, 120, 172, 0.3)")},r.prototype.clearActive=function(){return $(".dream").removeClass("dreamActive_editMode")},r.prototype.clearForm=function(){return this.model=null,$("#title").val(""),$("#body").val("")},r.prototype.ballEffect=function(){return this.clearEffect(),this.model?$("#submit-effect").addClass("ball_editMode"):$("#submit-effect").addClass("ball")},r.prototype.bounceEffect=function(){return this.clearEffect(),this.model?$("#submit-effect").addClass("bounceOut_editMode"):$("#submit-effect").addClass("bounceOut")},r.prototype.clearEffect=function(){return $("#submit-effect").removeClass("bounceOut_editMode"),$("#submit-effect").removeClass("bounceOut"),$("#submit-effect").removeClass("ball"),$("#submit-effect").removeClass("ball_editMode")},r.prototype.updateLog=function(){var e,t;return t=this,e={log_id:this.model.get("id"),title:$("#title").val(),body:$("#body").val()},this.model.save(e,{success:function(){return setTimeout(function(){return t.bounceEffect(),t.close()},1e3)}})},r.prototype.addNewLog=function(){var e,t;return t=this,e={title:$("#title").val(),body:$("#body").val()},App.dreams.create(e,{success:function(e){return setTimeout(function(){var n;return t.bounceEffect(),t.close(),n=new App.LogView({model:e}),$("#dreamList").prepend(n.render()),App.dreamLog.load(e),App.dreamLog.open()},1e3)}})},r}(Backbone.View)}).call(this);
(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=function(e,t){return function(){return e.apply(t,arguments)}};App.LogListView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el=$("#dreamList"),n.prototype.initialize=function(){var e;return e=this,App.dreams.on("reset",function(){return App.votes.on("reset",function(){return e.render()})})},n.prototype.render=function(){return App.dreams.each(function(e){var t;return t=new App.LogView({model:e}),$("#dreamList").prepend(t.render())})},n}(Backbone.View),App.LogView=function(e){function r(){return this.destroy=n(this.destroy,this),this.deleteLog=n(this.deleteLog,this),this.setupCalendar=n(this.setupCalendar,this),this.dreamActive=n(this.dreamActive,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.tagName="li",r.prototype.className="dream",r.prototype.events={"click .dreamInfo":"showHandler","click .delete_icon":"deleteLog"},r.prototype.initialize=function(){var e;return this.template=$("#dream-template").generateTemplate(),e=App.usersCollection.get(this.model.get("user_id")).get("thumb_url"),this.setupCalendar(),this.model.set({user_icon:e,vote_counts:App.votes.getVotes(this.model.id).count}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.destroy)},r.prototype.render=function(){return $(this.el).attr("user_id",this.model.get("user_id")),$(this.el).attr("title",this.model.get("title").toLowerCase().replace(/\s+/g,"")),$(this.el).html(this.template(this.model.toJSON())),$(this.el).hasClass("dreamActive")&&this.dreamActive(),App.editMode&&(console.log("editmode in log view"),this.$(".profileImg").hide(),this.$(".delete_icon").show(),this.$(".dream").addClass("dream_editMode"),this.$(".profileImg-wrap").addClass("showProfileImg"),this.$(".dreamDate").addClass("dreamDateFades")),this.el},r.prototype.showHandler=function(){return App.editMode?(App.dreamLog.close(),App.newDreamLog.clearActive(),$(this.el).addClass("dreamActive_editMode"),App.newDreamLog.isOpen()?App.newDreamLog.flash():App.newDreamLog.open(),App.newDreamLog.load(this.model)):(App.newDreamLog.close(),this.dreamActive(),App.dreamLog.load(this.model),App.dreamLog.isOpen()?App.dreamLog.flash():App.dreamLog.open())},r.prototype.dreamActive=function(){return App.dreamLog.clearActive(),this.$(".profileImg-wrap").addClass("showProfileImg"),this.$(".dreamDate").addClass("dreamDateFades"),this.$(".dreamArrow").addClass("showDreamArrow"),$(this.el).addClass("dreamActive")},r.prototype.setupCalendar=function(){var e,t;return e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=new Date(this.model.get("created_at")),this.model.set({date:t.getDate(),month:e[t.getMonth()],year:t.getFullYear()})},r.prototype.deleteLog=function(){return this.model.destroy()},r.prototype.destroy=function(){return this.remove()},r}(Backbone.View)}).call(this);